include:
  - /sys/config/config.yml
  - /templates/ci/dkc.yml
  - /templates/cd/k8s.yml

# deployments
deploy:sys:dev:
  extends:
    - .jobDev
    - .deployToK8s
  stage: deploy
  rules:
    - !reference [.filterDeploymentDev, rules]
deploy:sys:prod:
  extends:
    - .jobProd
    - .deployToK8s
  stage: deploy
  rules:
    - !reference [.filterDeploymentProd, rules]

dry-run:sys:dev:
  variables:
    CICD_DRY_RUN: "true"
  extends:
   - .jobDev
   - .deployToK8s
  stage: deploy
  rules:
    - !reference [.filterDryDeployment, rules]
add-deploy:sys:dev:
  extends:
    - .jobDev
    - .deployToK8s
  stage: deploy
  rules:
    - !reference [.filterAdditionalDeployment, rules]